#!/usr/bin/env -S bash -c 'echo "Not a user script. source(aka .) only"'

if [[ ! "$-" =~ i ]]; then
    LOAD_EXIT=1
    echo "Non interactive session ($-) , stopping load of shell environment" 1>&2
else
    ${NO_RESET:+:} reset
    export NO_RESET=1

    [ -z "$UMASK" ] || umask "$UMASK"
    export TERM="${TERM:-xterm-256color}"
    if [ -z "$TERM" ]; then
        find /usr/share/terminfo -type f -print0 | xargs -0 basename \
            | egrep '^(xterm|vt100|dumb)' | sed -Ee '
                s/^(.*)$/9 \1/g;
                s/^9 (xterm-256color)/1 \1/;
                s/^9 (xterm)$/2 \1/;
                s/^9 (vt100-putty)$/3 \1/;
                s/^9 (vt100)$/4 \1/;
                s/^9 (dumb)/8 \1/;
            ' | sort | head -n1
    fi
    if [ -z "$LANG" ] && is_cmd locale; then
        export LANG="$(locale -a | egrep -i '^(en_US|C|POSIX)(\.utf-8)?$' | head -n1)"
    fi
fi

# vim: set ft=sh expandtab tabstop=4 shiftwidth=4:
